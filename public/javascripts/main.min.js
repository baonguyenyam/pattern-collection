"use strict";function getUIMG(){$.get("/getimg",function(t){var n=shuffle(t);$("#pagination-container").pagination({dataSource:n,pageSize:20,className:"paginationjs-theme-green",callback:function(t,n){var o=simpleTemplating(t);$("#data-container").html(o),IMGResponsive()}})})}function shuffle(t){for(var n,o,e=t.length;0!==e;)o=Math.floor(Math.random()*e),n=t[e-=1],t[e]=t[o],t[o]=n;return t}function simpleTemplating(t){var o='<div class="row">';return $.each(t,function(t,n){o+='<div class="boxcol" onclick="openPreview(this)"><div class="item box" bg-img="/img/'+n+'" bg-size="auto" bg-pos="top left"></div></div>'}),o+="</div>"}function openPreview(t){$("#download").show();var n=$(t).find(".item").attr("bg-img");$(".preview .box").css({"background-position":"top left","background-size":"auto","background-image":"url("+n+")"}),$("#download").attr("data-down",n)}function IMGResponsive(){$("[bg-img]").each(function(){var t=$(this).attr("bg-img"),n=$(this).attr("bg-pos"),o=$(this).attr("bg-size");n&&0<n.length?$(this).css({"background-position":n}):$(this).css({"background-position":"center center"}),o&&0<o.length?$(this).css({"background-size":o}):$(this).css({"background-size":"cover"}),$(this).css({"background-image":"url("+t+")"})})}$(document).ready(function(){getUIMG(),$("#download").on("click",function(){var n=new XMLHttpRequest,o=$(this).attr("data-down");n.open("GET",o,!0),n.responseType="blob",n.onload=function(t){download(n.response,o,"image/*")},n.send()})}),$("#formAddComponent button").click(function(t){var n=new FormData($("#formAddComponent")[0]);return $.ajax({url:"/upload",type:"POST",contentType:!1,processData:!1,cache:!1,data:n,success:function(){alert("Upload hoàn tất"),$("#formAddComponent")[0].reset()},error:function(){alert("Lỗi khi upload!")}}),!1});